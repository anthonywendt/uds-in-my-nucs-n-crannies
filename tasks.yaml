variables:
  - name: ARCH
    description: "What architecture to use"
    default: "amd64"

includes:
  - create: ./tasks/create.yaml
  - deploy: ./tasks/deploy.yaml

tasks:
  - name: create-k3d-bundle
    actions:
      - task: create:gitlab-dependency-package
      - task: create:k3d-bundle

  - name: create-rke2-bundle
    actions:
      - task: create:local-path-provisioner
      - task: create:dns-updates
      - task: create:rke2-bundle

  - name: create-ai4ns-bundle
    actions:
      - task: create:ai4ns-bundle

  - name: deploy-rke2-bundle
    actions:
      - task: deploy:rke2-bundle

  - name: deploy-ai4ns-bundle
    actions:
      - task: deploy:ai4ns-bundle